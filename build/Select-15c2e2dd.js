import{m as t,S as e,c as n}from"./createSelect-669695e0.js";import r,{useContext as a,useRef as o,useEffect as c,Component as i,useCallback as s,useMemo as u,forwardRef as l}from"react";import{P as f}from"./index-3f17275b.js";import{_ as p}from"./objectWithoutPropertiesLoose-1e1a7051.js";import{_ as y,a as v}from"./setPrototypeOf-c6ba02e6.js";import{_ as d}from"./objectWithoutProperties-ff712cd0.js";import{_ as h,a as O}from"./get-ae46b391.js";import{_ as b,a as g,b as m,c as j,e as A,d as P}from"./inherits-d3723d19.js";import{A as E}from"./context-f854a00e.js";import{u as k}from"./use-memo-one.esm-19c0a4a5.js";var x=t(e);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(){function t(e){var n=this;m(this,t),y(this,"_isAnalyticsEvent",!0),y(this,"clone",(function(){return new t({payload:C({},n.payload)})})),this.payload=e.payload}return b(t,[{key:"update",value:function(t){return"function"==typeof t&&(this.payload=t(this.payload)),"object"===g(t)&&(this.payload=C(C({},this.payload),t)),this}}]),t}();function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return P(this,n)}}var S=function(t){j(n,N);var e=D(n);function n(t){var r;return m(this,n),r=e.call(this,t),y(v(r),"_isUIAnalyticsEvent",!0),y(v(r),"clone",(function(){return r.hasFired?null:new n({context:h(r.context),handlers:h(r.handlers),payload:JSON.parse(JSON.stringify(r.payload))})})),y(v(r),"fire",(function(t){r.hasFired||(r.handlers.forEach((function(e){return e(v(r),t)})),r.hasFired=!0)})),r.context=t.context||[],r.handlers=t.handlers||[],r.hasFired=!1,r}return b(n,[{key:"update",value:function(t){return this.hasFired?this:O(A(n.prototype),"update",this).call(this,t)}}]),n}(),R=function(){return a(E)};function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=A(t);if(e){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return P(this,n)}}var H={getAtlaskitAnalyticsContext:f.func,getAtlaskitAnalyticsEventHandlers:f.func},T=function(){return[]},V=function(t){j(n,i);var e=_(n);function n(t){var r;return m(this,n),r=e.call(this,t),y(v(r),"getChildContext",(function(){return{getAtlaskitAnalyticsContext:r.getAnalyticsContext}})),y(v(r),"getAnalyticsContext",(function(){var t=r.props.data,e=r.context.getAtlaskitAnalyticsContext;return[].concat(h((void 0===e?T:e)()),[t])})),y(v(r),"getAnalyticsEventHandlers",(function(){var t=r.context.getAtlaskitAnalyticsEventHandlers;return(void 0===t?T:t)()})),r.contextValue={getAtlaskitAnalyticsContext:r.getAnalyticsContext,getAtlaskitAnalyticsEventHandlers:r.getAnalyticsEventHandlers},r}return b(n,[{key:"render",value:function(){var t=this.props.children;return r.createElement(E.Provider,{value:this.contextValue},t)}}]),n}();y(V,"contextTypes",H),y(V,"childContextTypes",H);var F=V,B=function(t){var e=t.data,n=t.children,a=function(t){var e=o(t);return c((function(){e.current=t}),[t]),e}(e),i=R(),l=s((function(){return[].concat(h(i.getAtlaskitAnalyticsContext()),[a.current])}),[i,a]),f=u((function(){return{getAtlaskitAnalyticsContext:l,getAtlaskitAnalyticsEventHandlers:i.getAtlaskitAnalyticsEventHandlers}}),[i,l]);return r.createElement(E.Provider,{value:f},n)},W="undefined"!=typeof process&&process.env.ANALYTICS_NEXT_MODERN_CONTEXT?B:F;function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L=function(t){return function(e){var n=l((function(n,a){var o=n.analyticsContext,c=d(n,["analyticsContext"]),i=u((function(){return J(J({},t),o)}),[o]);return r.createElement(W,{data:i},r.createElement(e,p({},c,{ref:a})))}));return n.displayName="WithAnalyticsContext(".concat(e.displayName||e.name,")"),n}};function X(){var t=R();return{createAnalyticsEvent:k((function(e){return new S({context:t.getAtlaskitAnalyticsContext(),handlers:t.getAtlaskitAnalyticsEventHandlers(),payload:e})}),[t])}}function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=X(),r=n.createAnalyticsEvent,a=o({}),c=u((function(){var n=a.current;return Object.keys(n).filter((function(e){return!(e in t)})).forEach((function(t){return delete n[t]})),Object.keys(t).reduce((function(a,o){var c=t[o];if(!["object","function"].includes(g(c)))return a;var i=e[o];if(o in n&&n[o].eventCreator===c&&n[o].propValue===i)return U(U({},a),{},y({},o,n[o].wrappedCallback));var s=function(){var t="function"==typeof c?c(r,e):r(c);if(i&&"function"==typeof i){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];i.apply(void 0,a.concat([t]))}};return n[o]={eventCreator:c,wrappedCallback:s,propValue:i},U(U({},a),{},y({},o,s))}),{})}),[t,e,r,a]);return{patchedEventProps:c}}var q,z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=l((function(n,a){var o=Y(t,n).patchedEventProps,c=X().createAnalyticsEvent;return r.createElement(e,p({},n,o,{createAnalyticsEvent:c,ref:a}))}));return n.displayName="WithAnalyticsEvents(".concat(e.displayName||e.name,")"),n}},G=n(x),K=(q="atlaskit",function(t){return function(e){var n=e(t),r=n.clone();return r&&r.fire(q),n}}),Q=L({componentName:"select",packageName:"@atlaskit/select",packageVersion:"15.2.13"})(z({onChange:K({action:"changed",actionSubject:"option",attributes:{componentName:"select",packageName:"@atlaskit/select",packageVersion:"15.2.13"}})})(G));export{Q as S,x as a};
