import{jsx as t}from"react/jsx-runtime";import e,{Component as s}from"react";import{DropdownIndicator as o,Option as a}from"../Select/reactSelectComponents.js";import{s as l}from"../../style-inject.es-1f59c1d0.js";import{b as i,d as n,e as r,Q as c,_ as d,R as p,k as u,o as f,l as m,c as y}from"../../index-4bd03571.esm-c4a0d41b.js";import{m as _,S as h}from"../../stateManager-845a3300.esm-bbeab66c.js";import"../../index-d0edc839.js";import{n as v}from"../../createSelect-5fdfb246.js";import"../../index.es-62933797.js";import"../../utils/dom.js";import"../../unitless.esm-d94354fa.js";import"../../index-dd80248b.js";import"../../memoize-one.esm-8827f1ac.js";import"../../objectWithoutPropertiesLoose-982ef579.js";import"../../objectWithoutProperties-90b89624.js";import"../../inherits-d3723d19.js";import"../../setPrototypeOf-c6ba02e6.js";import"../../index-72b69d08.js";import"../../_commonjsHelpers-6e998e78.js";import"../../core.esm-a8712816.js";import"../../inheritsLoose-6fd5c6e3.js";var k,b,O,g={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},j=_(h),x=v((k=j,O=b=function(t){i(a,s);var o=n(a);function a(t){var e;return r(this,a),(e=o.call(this)).select=void 0,e.lastRequest=void 0,e.mounted=!1,e.handleInputChange=function(t,s){var o=e.props,a=o.cacheOptions,l=o.onInputChange,i=c(t,s,l);if(!i)return delete e.lastRequest,void e.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(a&&e.state.optionsCache[i])e.setState({inputValue:i,loadedInputValue:i,loadedOptions:e.state.optionsCache[i],isLoading:!1,passEmptyOptions:!1});else{var n=e.lastRequest={};e.setState({inputValue:i,isLoading:!0,passEmptyOptions:!e.state.loadedInputValue},(function(){e.loadOptions(i,(function(t){e.mounted&&n===e.lastRequest&&(delete e.lastRequest,e.setState((function(e){return{isLoading:!1,loadedInputValue:i,loadedOptions:t||[],passEmptyOptions:!1,optionsCache:t?d(d({},e.optionsCache),{},p({},i,t)):e.optionsCache}})))}))}))}return i},e.state={defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0,inputValue:void 0!==t.inputValue?t.inputValue:"",isLoading:!0===t.defaultOptions,loadedOptions:[],passEmptyOptions:!1,optionsCache:{},prevDefaultOptions:void 0,prevCacheOptions:void 0},e}return u(a,[{key:"componentDidMount",value:function(){var t=this;this.mounted=!0;var e=this.props.defaultOptions,s=this.state.inputValue;!0===e&&this.loadOptions(s,(function(e){if(t.mounted){var s=!!t.lastRequest;t.setState({defaultOptions:e||[],isLoading:s})}}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(t,e){var s=this.props.loadOptions;if(!s)return e();var o=s(t,e);o&&"function"==typeof o.then&&o.then(e,(function(){return e()}))}},{key:"render",value:function(){var t=this,s=this.props;s.loadOptions;var o=s.isLoading,a=f(s,["loadOptions","isLoading"]),l=this.state,i=l.defaultOptions,n=l.inputValue,r=l.isLoading,c=l.loadedInputValue,d=l.loadedOptions,p=l.passEmptyOptions?[]:n&&c?d:i||[];return e.createElement(k,m({},a,{ref:function(e){t.select=e},options:p,isLoading:r||o,onInputChange:this.handleInputChange}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var s=t.cacheOptions!==e.prevCacheOptions?{prevCacheOptions:t.cacheOptions,optionsCache:{}}:{},o=t.defaultOptions!==e.prevDefaultOptions?{prevDefaultOptions:t.defaultOptions,defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0}:{};return d(d({},s),o)}}]),a}(),b.defaultProps=g,O));l('@import url("https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap");.styled-atlaskit-select{font-family:Roboto,sans-serif!important}.styled-atlaskit-select div[class*=-control],.styled-atlaskit-select__control{background-color:transparent;border-color:#b8bfcd;border-radius:4px;border-width:1px}.styled-atlaskit-select div[class*=-control]:hover,.styled-atlaskit-select__control:hover{background-color:#f5f6f8;border-color:#687792}.styled-atlaskit-select div[class*=-control].styled-atlaskit-select__control--is-focused,.styled-atlaskit-select__control.styled-atlaskit-select__control--is-focused{border:2px solid #0b6cff}.styled-atlaskit-select div[class*=-control].styled-atlaskit-select__control--is-disabled,.styled-atlaskit-select__control.styled-atlaskit-select__control--is-disabled{background-color:#f5f6f8}.styled-atlaskit-select [class$=-menu]>div::-webkit-scrollbar{width:6px}.styled-atlaskit-select [class$=-menu]>div::-webkit-scrollbar-track{border-radius:10px}.styled-atlaskit-select [class$=-menu]>div::-webkit-scrollbar-thumb{background:#e1e4e9;border-radius:10px}.styled-atlaskit-select__menu-list:hover{background-color:#fff}.styled-atlaskit-select__option{color:#232831;height:36px;line-height:24px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.styled-atlaskit-select__option--is-disabled{color:#a5adba!important}.styled-atlaskit-select__option.styled-atlaskit-select__option--is-focused{background-color:#f5f6f8;box-shadow:none}.styled-atlaskit-select__option.styled-atlaskit-select__option--is-selected{background-color:#0b6cff;color:#fff}.styled-atlaskit-select div.styled-atlaskit-select__option,.styled-atlaskit-select__placeholder,.styled-atlaskit-select__value-container div{font-family:Roboto,sans-serif;font-size:16px}.styled-atlaskit-select__single-value{line-height:20px!important}.styled-atlaskit-select__placeholder{color:#b8bfcd!important}.styled-atlaskit-select__multi-value{background-color:#0b6cff!important}.styled-atlaskit-select__multi-value__label{color:#fff!important}.styled-atlaskit-select__multi-value__remove:hover{background-color:transparent!important}.styled-atlaskit-select__multi-value__remove span{--icon-primary-color:transparent;--icon-secondary-color:#fff!important}.styled-atlaskit-select__multi-value-unremovable{background-color:#687792!important;border-radius:2px;padding-right:6px}.styled-atlaskit-select__multi-value-unremovable+.styled-atlaskit-select__multi-value__remove{display:none}.styled-atlaskit-select__indicators .icon-chevron-down{color:#687792;margin-right:8px}');const L=y,C=e=>t("div",{className:"styled-atlaskit-select__menu",children:t(y.MenuList,{className:"styled-atlaskit-select__menu-list",...e,children:e.children})}),S=({isMulti:s=!1,onChange:l,dataQa:i=null,dataQaProps:n=null,loadOptions:r,onLoadMoreOptions:c,...d})=>{const p=e.useRef(),u=e.useRef();return e.useLayoutEffect((()=>{c&&(()=>{if(!p.current)return;const t=p.current.select.select.select.controlRef,e=t.parentElement.parentElement;let s=e.querySelector(".styled-atlaskit-select__menu"),o=s?s.querySelector(".styled-atlaskit-select__menu-list"):null;const a=()=>{s=e.querySelector(".styled-atlaskit-select__menu"),o=s?s.querySelector(".styled-atlaskit-select__menu-list"):null,o&&o.addEventListener("scroll",(t=>{const{scrollHeight:e,scrollTop:s,offsetHeight:o}=t.currentTarget,a=p.current.select.state,l=a.loadedOptions.length>0?a.loadedOptions:a.defaultOptions,i=a.loadedOptions.length>0?"loadedOptions":"defaultOptions";s>=e-(o+30)&&(u.current&&clearTimeout(u.current),u.current=setTimeout((async()=>{if(!c)return;p.current.select.setState({isLoading:!0});const t=await c(a.inputValue,l.length);p.current&&p.current.select&&p.current.select.setState({isLoading:!1,[`${i}`]:[...l,...t]})}),500))}))};o?a():t.onclick=a})()}),[c,p]),t(x,{className:"styled-atlaskit-select",classNamePrefix:"styled-atlaskit-select",components:{DropdownIndicator:o,MenuList:C,Option:d.formatOptionLabel?y.Option:a},loadOptions:r,isMulti:s,onChange:l?t=>l(t):void 0,...d,ref:p})},w=({dataQa:e=null,dataQaProps:s=null,...o})=>e?t("div",{"data-qa-id":e,"data-qa-props":s,children:t(S,{...o})}):t(S,{...o});export{w as SelectAsync,L as reactSelectComponents};
