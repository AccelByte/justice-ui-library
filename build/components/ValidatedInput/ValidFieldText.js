import{jsx as e,jsxs as t}from"react/jsx-runtime";import*as i from"react";import o from"classnames";import l from"react-tooltip";import s from"@atlaskit/field-text";import{s as n}from"../../style-inject.es-1f59c1d0.js";import{FieldLabel as a,FieldCounter as d,FieldErrorMessage as r,FieldHelperText as p}from"../Form/utility/FormUtility.js";import{InlinePopover as f}from"../InlinePopover/InlinePopover.js";import{isForbiddenKey as c}from"../../utils/input.js";import"../../server-d796a789.js";import"../../index-dd80248b.js";import"stream";import"../../utils/i18n/index.js";import"../../utils/i18n/loadLanguages.js";import"../../fa_icons-aa14317c.js";import"dompurify";import"../../constants/common.js";import"../../utils/typography.js";import"@atlaskit/inline-dialog";import"../../types/enum.js";n('@import url("https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap");.valid-field-text{font-family:Roboto,sans-serif;position:relative}.valid-field-text .field-label{font-size:14px;padding-bottom:4px}.valid-field-text .field-info{color:#b8bfcd;font-size:16px;margin-top:10px}.valid-field-text .ValidFieldInformation,.valid-field-text .fieldHeader{align-items:baseline;display:flex;justify-content:space-between;white-space:pre-wrap}.valid-field-text .ValidFieldInformation.pushRight,.valid-field-text .fieldHeader.pushRight{justify-content:flex-end}.valid-field-text .fieldHeader>label:not(.withTooltip){display:initial}.valid-field-text div>label{display:none}.valid-field-text .valid-field-text-input-container{display:flex;height:40px;position:relative}.valid-field-text .valid-field-text-input-container .inline-popover{width:100%}.valid-field-text .valid-field-text-input-container [class|=Content__ChildWrapper]>[class|=Content]{border:1px solid #b8bfcd}.valid-field-text .valid-field-text-input-container [class|=Content__ChildWrapper]>[class|=Content]:hover{border:1px solid #687792}.valid-field-text .valid-field-text-input-container.focusedFieldText [class|=Content__ChildWrapper]>[class|=Content]{border:2px solid #0b6cff}.valid-field-text .valid-field-text-input-container input{color:#232831;font-size:16px}.valid-field-text .valid-field-text-input-container input:disabled{color:#909bb0}.valid-field-text .valid-field-text-input-container input::placeholder{color:#b8bfcd}.valid-field-text .valid-field-text-input-container [class^=addOns--field]{align-items:center;background-color:#f5f6f8;border:1px solid #b8bfcd;box-sizing:border-box;color:#687792;display:flex;font-size:inherit;height:100%;padding:0 10px;z-index:2}.valid-field-text .valid-field-text-input-container [class^=addOns--field][class$=__prefix]{border-radius:4px 0 0 4px;margin-right:-2px}.valid-field-text .valid-field-text-input-container [class^=addOns--field][class$=__suffix]{border-radius:0 4px 4px 0;margin-left:-2px}');class u extends s{componentWillReceiveProps(e){this.props.value===e.value||this.setState({value:e.value})}}class m extends i.Component{constructor(e){if(super(e),this.state={isFocus:!1},"number"===e.type&&"number"==typeof e.maxLength)throw new Error('prop maxLength cannot be used when prop type="number"')}toolTipRef=i.createRef();inputRef=i.createRef();revertValueNumericTimer=null;componentDidMount(){setTimeout((()=>{l.rebuild()}),100)}componentWillUnmount(){this.hideTooltip()}hideTooltip=()=>{this.toolTipRef&&this.toolTipRef.current&&l.hide(this.toolTipRef.current)};showTooltip=()=>{this.toolTipRef&&this.toolTipRef.current&&this.props.showTooltipOnFocus&&l.show(this.toolTipRef.current)};handleBlur=e=>{const{onBlur:t}=this.props;if(this.hideTooltip(),"function"==typeof t)return t(e);this.setState({isFocus:!1})};handleFocus=e=>{const{onFocus:t}=this.props;t&&t(e),this.showTooltip(),this.setState({isFocus:!0})};getInputType=()=>{const{type:e,precision:t}=this.props;return"float"===e?0===t?"number":"tel":e};typeIsNumeric=()=>["number","float"].includes(this.props.type);handleOnKeyDown=e=>{const{onKeyDown:t,min:i,value:o,precision:l}=this.props;this.typeIsNumeric()&&!e.ctrlKey&&c({event:e,value:o,min:i,isFloat:"tel"===this.getInputType(),precision:l})&&e.preventDefault(),t&&t(e)};renderInput=()=>{const{placeholder:t,name:i,value:o,disabled:l,min:s,max:n,maxLength:a,autoComplete:d,onChange:r}=this.props;return e(u,{ref:this.inputRef,isLabelHidden:!1,onFocus:this.handleFocus,onBlur:this.handleBlur,placeholder:t,name:i,value:o,onChange:r,disabled:l,type:this.getInputType(),min:s,max:n,shouldFitContainer:!0,onKeyDown:this.handleOnKeyDown,maxLength:a,autoComplete:d})};render(){const{label:i="",value:l,maxLength:s,className:n,optionalLabel:c,errMessage:u,isLabelHidden:m,helperText:h,tooltip:x,dataQa:v,dataQaProps:b,prefixField:y,suffixField:g,validFieldTextRef:T,popoverContent:F,popoverPlacement:R,popoverType:w,customField:j,isRequired:C=!0,isInvalid:_=!0}=this.props,{isFocus:I}=this.state;return t("div",{className:o(n,"valid-field-text"),"data-qa-id":v,"data-qa-props":b,ref:T,children:[t("div",{className:o("fieldHeader",{pushRight:!i&&!C}),children:[!m&&e(a,{label:i,optionalLabel:c,isRequired:C,tooltip:x,tooltipRef:this.toolTipRef}),!!s&&e(d,{value:l,maxLength:s,className:"px-0"})]}),t("div",{className:o("valid-field-text-input-container",{focusedFieldText:this.state.isFocus}),children:[!!y&&e("div",{className:"addOns--field__prefix",children:y}),F?e(f,{isOpen:I,placement:R,content:F,type:w,children:this.renderInput()}):this.renderInput(),!!g&&e("div",{className:"addOns--field__suffix",children:g})]}),j,_&&u&&e(r,{message:u}),h&&e(p,{message:h})]})}}export{u as Input,m as ValidFieldText};
