import{jsx as e,jsxs as t}from"react/jsx-runtime";import*as i from"react";import{c as o}from"../../index-6ea95111.js";import{R as s}from"../../index.es-62933797.js";import{F as l}from"../../index-0b3ab365.js";import{s as r}from"../../style-inject.es-1f59c1d0.js";import{FieldLabel as n,FieldCounter as a,FieldErrorMessage as p,FieldHelperText as d}from"../Form/utility/FormUtility.js";import{InlinePopover as c}from"../InlinePopover/InlinePopover.js";import{isForbiddenKey as m}from"../../utils/input.js";import"../../objectWithoutPropertiesLoose-982ef579.js";import"../../inherits-d3723d19.js";import"../../setPrototypeOf-c6ba02e6.js";import"styled-components";import"../../objectWithoutProperties-90b89624.js";import"../../get-ae46b391.js";import"../../unsupportedIterableToArray-0ca076cc.js";import"../../index-6397c7e4.js";import"../../index-dd80248b.js";import"../../context-f854a00e.js";import"../../use-memo-one.esm-19c0a4a5.js";import"../../Label-9102bfae.js";import"../../_commonjsHelpers-6e998e78.js";import"../../core.esm-a8712816.js";import"../../inheritsLoose-6fd5c6e3.js";import"../../unitless.esm-d94354fa.js";import"../../index-407758d3.js";import"../../noop-2d37c277.js";import"../../slicedToArray-a622878d.js";import"../../nonIterableRest-e93b6547.js";import"../../index-72b69d08.js";import"../../server-d796a789.js";import"stream";import"../../utils/i18n/index.js";import"../../utils/i18n/loadLanguages.js";import"../../fa_icons-aa14317c.js";import"../../purify.es-49746c08.js";import"../../constants/common.js";import"../../utils/typography.js";import"../../math-402b3777.js";import"../../elevation-bd31e9da.js";import"../../Popper-87e1f9b3.js";import"../../memoize-one.esm-8827f1ac.js";import"../../types/enum.js";r('@import url("https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap");.valid-field-text{font-family:Roboto,sans-serif;position:relative}.valid-field-text .field-label{font-size:14px;padding-bottom:4px}.valid-field-text .field-info{color:#b8bfcd;font-size:16px;margin-top:10px}.valid-field-text .ValidFieldInformation,.valid-field-text .fieldHeader{align-items:baseline;display:flex;justify-content:space-between;white-space:pre-wrap}.valid-field-text .ValidFieldInformation.pushRight,.valid-field-text .fieldHeader.pushRight{justify-content:flex-end}.valid-field-text .fieldHeader>label:not(.withTooltip){display:initial}.valid-field-text div>label{display:none}.valid-field-text .valid-field-text-input-container{display:flex;height:40px;position:relative}.valid-field-text .valid-field-text-input-container .inline-popover{width:100%}.valid-field-text .valid-field-text-input-container [class|=Content__ChildWrapper]>[class|=Content]{border:1px solid #b8bfcd}.valid-field-text .valid-field-text-input-container [class|=Content__ChildWrapper]>[class|=Content]:hover{border:1px solid #687792}.valid-field-text .valid-field-text-input-container.focusedFieldText [class|=Content__ChildWrapper]>[class|=Content]{border:2px solid #0b6cff}.valid-field-text .valid-field-text-input-container input{color:#232831;font-size:16px}.valid-field-text .valid-field-text-input-container input:disabled{color:#909bb0}.valid-field-text .valid-field-text-input-container input::placeholder{color:#b8bfcd}.valid-field-text .valid-field-text-input-container [class^=addOns--field]{align-items:center;background-color:#f5f6f8;border:1px solid #b8bfcd;box-sizing:border-box;color:#687792;display:flex;font-size:large;height:100%;padding:0 10px;z-index:2}.valid-field-text .valid-field-text-input-container [class^=addOns--field][class$=__prefix]{border-radius:4px 0 0 4px;margin-right:-2px}.valid-field-text .valid-field-text-input-container [class^=addOns--field][class$=__suffix]{border-radius:0 4px 4px 0;margin-left:-2px}');class u extends l{componentWillReceiveProps(e){this.props.value===e.value||this.setState({value:e.value})}}class f extends i.Component{constructor(e){if(super(e),this.state={isFocus:!1},"number"===e.type&&"number"==typeof e.maxLength)throw new Error('prop maxLength cannot be used when prop type="number"')}toolTipRef=i.createRef();inputRef=i.createRef();revertValueNumericTimer=null;componentDidMount(){setTimeout((()=>{s.rebuild()}),100)}componentWillUnmount(){this.hideTooltip()}hideTooltip=()=>{this.toolTipRef&&this.toolTipRef.current&&s.hide(this.toolTipRef.current)};showTooltip=()=>{this.toolTipRef&&this.toolTipRef.current&&this.props.showTooltipOnFocus&&s.show(this.toolTipRef.current)};handleBlur=e=>{const{onBlur:t}=this.props;if(this.hideTooltip(),"function"==typeof t)return this.revertValueNumericTimer?void setTimeout((()=>{t(e)}),1):t(e);this.setState({isFocus:!1})};handleFocus=e=>{const{onFocus:t}=this.props;t&&t(e),this.showTooltip(),this.setState({isFocus:!0})};getInputType=()=>{const{type:e,precision:t}=this.props;return"float"===e?0===t?"number":"tel":e};typeIsNumeric=()=>["number","float"].includes(this.props.type);handleOnKeyDown=e=>{const{onKeyDown:t,min:i,value:o,precision:s}=this.props;this.typeIsNumeric()&&!e.ctrlKey&&m({event:e,value:o,min:i,isFloat:"tel"===this.getInputType(),precision:s})&&e.preventDefault(),t&&t(e)};handleOnChange=e=>{const t=e.currentTarget,{onChange:i,type:o}=this.props;this.typeIsNumeric()&&isNaN("float"===o?Number(t.value):t.valueAsNumber)&&(e.currentTarget.value="",e.target.value="",this.revertValueNumericTimer=setTimeout((()=>{t.value=null,this.inputRef.current?.setState({value:""}),this.revertValueNumericTimer=null}))),i?.(e)};renderInput=()=>{const{placeholder:t,name:i,value:o,disabled:s,min:l,max:r,maxLength:n,autoComplete:a}=this.props;return e(u,{ref:this.inputRef,isLabelHidden:!1,onFocus:this.handleFocus,onBlur:this.handleBlur,placeholder:t,name:i,value:o,onChange:this.handleOnChange,disabled:s,type:this.getInputType(),min:l,max:r,shouldFitContainer:!0,onKeyDown:this.handleOnKeyDown,maxLength:n,autoComplete:a})};render(){const{label:i="",value:s,maxLength:l,className:r,optionalLabel:m,errMessage:u,isLabelHidden:f,helperText:h,tooltip:x,dataQa:v,dataQaProps:b,prefixField:j,suffixField:y,validFieldTextRef:g,popoverContent:T,popoverPlacement:R,popoverType:F,customField:C,isRequired:N=!0,isInvalid:w=!0}=this.props,{isFocus:I}=this.state;return t("div",{className:o(r,"valid-field-text"),"data-qa-id":v,"data-qa-props":b,ref:g,children:[t("div",{className:o("fieldHeader",{pushRight:!i&&!N}),children:[!f&&e(n,{label:i,optionalLabel:m,isRequired:N,tooltip:x,tooltipRef:this.toolTipRef}),!!l&&e(a,{value:s,maxLength:l,className:"px-0"})]}),t("div",{className:o("valid-field-text-input-container",{focusedFieldText:this.state.isFocus}),children:[!!j&&e("div",{className:"addOns--field__prefix",children:j}),T?e(c,{isOpen:I,placement:R,content:T,type:F,children:this.renderInput()}):this.renderInput(),!!y&&e("div",{className:"addOns--field__suffix",children:y})]}),C,w&&u&&e(p,{message:u}),h&&e(d,{message:h})]})}}export{u as Input,f as ValidFieldText};
